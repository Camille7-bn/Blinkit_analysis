<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlinkIt Marketing - Analyse Data</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            margin: 20px;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #4CAF50;
        }
        .container {
            max-width: 900px;
            background: white;
            padding: 20px;
            margin: auto;
            box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
        }
        pre {
            background-color: #282c34;
            color: #FFD700;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .interpretation {
            background-color: #e8f5e9;
            padding: 10px;
            border-left: 5px solid #4CAF50;
            margin-top: 10px;
        }
        .footer {
            margin-top: 30px;
            font-size: 14px;
            color: gray;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>üöÄ BlinkIt Marketing - Analyse Data</h1>

    <h2>üìä Taux de r√©tention client</h2>
    <pre>
WITH clients_juin AS (
    SELECT DISTINCT customer_id
    FROM blinkit-454014.Source.orders
    WHERE DATE_TRUNC(DATE(order_date), MONTH) = DATE '2024-06-01'
),
clients_juillet AS (
    SELECT DISTINCT customer_id
    FROM blinkit-454014.Source.orders
    WHERE DATE_TRUNC(DATE(order_date), MONTH) = DATE '2024-07-01'
)
SELECT 
    COUNT(DISTINCT clients_juillet.customer_id) * 100.0 / COUNT(DISTINCT clients_juin.customer_id) AS retention_rate_pct
FROM clients_juin
LEFT JOIN clients_juillet 
    ON clients_juin.customer_id = clients_juillet.customer_id;
    </pre>
    <div class="interpretation">
        <strong>Interpr√©tation :</strong> Le taux de r√©tention est de **9,36%**, ce qui signifie que seulement **9,36% des clients de juin ont command√© √† nouveau en juillet**. Ce taux est relativement faible et sugg√®re que BlinkIt a du mal √† fid√©liser ses clients.
    </div>

    <h2>üìå Taux de conversion</h2>
    <pre>
SELECT
    SUM(conversions)*100 / SUM(clicks) AS global_conversion_rate
FROM `Source.marketing_performance`;
    </pre>
    <div class="interpretation">
        <strong>Interpr√©tation :</strong> Le taux de conversion est **10,02%**, ce qui signifie que sur 100 visiteurs, **10 deviennent r√©ellement des clients**. C'est un bon indicateur d'efficacit√© marketing.
    </div>

    <h2>üìå Revenus g√©n√©r√©s au total</h2>
    <pre>
SELECT
    SUM(order_total) AS total_revenue
FROM `Source.orders`;
    </pre>
    <div class="interpretation">
        <strong>Interpr√©tation :</strong> BlinkIt a g√©n√©r√© **11 009 308 INR** de revenus bruts. Ce chiffre doit √™tre mis en balance avec les co√ªts marketing et op√©rationnels pour √©valuer la rentabilit√©.
    </div>

    <h2>üìå ROAS (Return on Ad Spend)</h2>
    <pre>
SELECT
    campaign_name,
    ROUND(SUM (revenue_generated) / SUM(spend),2) AS roas
FROM `Source.marketing_performance`
GROUP BY campaign_name;
    </pre>
    <div class="interpretation">
        <strong>Interpr√©tation :</strong> Un **ROAS sup√©rieur √† 1** signifie que la campagne est rentable. **"Referral Program" (ROAS = 2.03) est la plus rentable**, rapportant **2,03 INR pour chaque 1 INR investi**.
    </div>

    <h2>üìå Taux de livraison √† l'heure</h2>
    <pre>
SELECT
    SUM(CASE WHEN delivery_status = 'On Time' THEN 1 ELSE 0 END)*100 / COUNT(*) AS pct_on_time
FROM `Source.delivery_performance`;
    </pre>
    <div class="interpretation">
        <strong>Interpr√©tation :</strong> **69,4% des commandes sont livr√©es √† l'heure**, ce qui montre une marge d'am√©lioration pour respecter la promesse de rapidit√© de BlinkIt.
    </div>

    <h2>üìå Dur√©e moyenne de livraison</h2>
    <pre>
SELECT
    AVG(TIMESTAMP_DIFF(actual_delivery_time, order_date, MINUTE)) AS avg_delivery_time_minutes
FROM `Source.orders`;
    </pre>
